{% extends "base.html" %}

{% block title %}Editar Lecci√≥n{% endblock %}

{% block content %}
<div class="container py-4">
    <h2>‚úèÔ∏è Editar lecci√≥n: "{{ leccion.titulo }}"</h2>
    <p class="text-muted">Curso: {{ curso.titulo }}</p>

    <div class="card shadow-sm">
        <div class="card-body">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <div class="mt-3">
                    <button class="btn btn-success" type="submit">üíæ Guardar cambios</button>
                    <a href="{% url 'detalle_curso' curso.id %}" class="btn btn-secondary">‚ùå Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Mostrar/ocultar campos seg√∫n el tipo seleccionado
    const tipoSelect = document.querySelector('select[name="tipo"]');
    const videoField = document.querySelector('[name="video_url"]').parentElement;
    const docField = document.querySelector('[name="documento"]').parentElement;
    const textoField = document.querySelector('[name="contenido_texto"]').parentElement;

    function toggleFields() {
        const tipo = tipoSelect.value;
        videoField.style.display = tipo === 'video' ? 'block' : 'none';
        docField.style.display = tipo === 'documento' ? 'block' : 'none';
        textoField.style.display = tipo === 'texto' ? 'block' : 'none';
    }

    tipoSelect.addEventListener('change', toggleFields);
    toggleFields(); // Ejecutar al cargar
</script>
{% endblock %}